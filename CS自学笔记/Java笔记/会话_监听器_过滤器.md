# 会话

## 会话管理

### 为什么需要会话管理

> HTTP是无状态协议

- 无状态就是不保存状态,即无状态协议(stateless),HTTP协议自身不对请求和响应之间的通信状态进行保存,也就是说,在HTTP协议这个级别,协议对于发送过的请求或者响应都不做持久化处理
- 简单理解:浏览器发送请求,服务器接收并响应,但是服务器不记录请求是否来自哪个浏览器,服务器没记录浏览器的特征,就是客户端的状态

> 举例: 张三去一家饭馆点了几道菜,觉得味道不错,第二天又去了,对老板说,还点上次的那几道菜

- 无状态: 老板没有记录张三是否来过,更没有记录上次他点了那些菜,张三只能重新再点一遍
- 有状态: 老板把每次来吃饭的用户都做好记录,查阅一下之前的记录,查到了张三之前的菜单,直接下单

> 服务器上每一个session对象都对应一个客户端，而cookie是辨别客户端的标识。

## cookie

### cookie概述

> cookie是一种客户端会话技术,cookie由服务端产生,它是服务器存放在浏览器的一小份数据,浏览器以后每次访问该服务器的时候都会将这小份数据携带到服务器去。

### cookie的时效性

- 会话级Cookie
  - 服务器端并没有明确指定Cookie的存在时间
  - 在浏览器端，Cookie数据存在于内存中
  - 只要浏览器还开着，Cookie数据就一直都在
  - 浏览器关闭，内存中的Cookie数据就会被释放
- 持久化Cookie
  - 服务器端明确设置了Cookie的存在时间
  - 在浏览器端，Cookie数据会被保存到硬盘上
  - Cookie在硬盘上存在的时间根据服务器端限定的时间来管控，不受浏览器关闭的影响
  - 持久化Cookie到达了预设的时间会被释放

  ### cookie的提交路径

> 访问互联网资源时不能每次都需要把所有Cookie带上。访问不同的资源时,可以携带不同的cookie,我们可以通过cookie的setPath(String path) 对cookie的路径进行设置
### Session 会话

### HttpSession 概述

> HttpSession是一种保留更多信息在服务端的一种技术,服务器会为每一个客户端开辟一块内存空间,即session对象. 客户端在发送请求时,都可以使用自己的session. 这样服务端就可以通过session来记录某个客户端的状态了

### HttpSession 的使用

## 三大域对象

> 用来存储和传递数据的对象称为`域对象`

- 根据数据的调用范围可分为：请求域，会话域，应用域。

## 过滤器 filter

> 结构上位于 请求报文 或 响应报文 与 资源 之间

## 监听器

> 域对象身上发生事件的时候要执行的代码称之为监听器

## Ajax (Asynchronous JavaScript and XML ) 异步的JavaScript和XML

### 4.1 什么是ajax

- AJAX = Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）。
  
- AJAX 不是新的编程语言，而是一种使用现有标准的新方法。
  
- AJAX 最大的优点是在不重新加载整个页面的情况下，可以与服务器交换数据并更新部分网页内容。
  
- AJAX 不需要任何浏览器插件，但需要用户允许 JavaScript 在浏览器上执行。
  
- XMLHttpRequest 只是实现 Ajax 的一种方式。

- 简单来说,我们之前发的请求通过类似 form表单标签,a标签 这种方式,现在通过运行js代码动态决定什么时候发送什么样的请求

- 通过运行JS代码发送的请求浏览器可以不用跳转页面 ,我们可以在JS代码中决定是否要跳转页面

- 通过运行JS代码发送的请求,接收到返回结果后,我们可以将结果通过dom编程渲染到页面的某些元素上,实现局部更新

- 个人总结：就是一段js代码， 可以向后端发一段请求，服务器响应回来的一段信息也由js代码接收，然后决定是通过dom编程或bom编程决定要将信息显示的当前页面的某个位置或者显示在新页面上。在不重新加载整个页面的情况下 就能完成和服务器的交互完成页面上部分信息的更新。

> 客户端和服务端同步交互和异步交互

- 同步交互： 共享一个时间轴，客户端每发送一个请求，就要等待服务端处理请求发回响应。
- 异步交互： 各自有一个时间轴，js通过Ajax技术可以实现异步交互，因为不需要跳转页面。

> 实现方式
- 原生js代码
- 第三方封装好的工具 如：jquery
- ⭐️使用框架。 如VUE中axios




